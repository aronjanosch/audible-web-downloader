version: '3.8'

services:
  audible-web-downloader:
    build: .
    container_name: audible-web-downloader
    ports:
      - "5505:5505"
    volumes:
      # Mount config directory to persist all configuration files and auth tokens
      - ./config:/app/config
      # Mount temporary downloads directory for AAX files, vouchers, and conversion work
      - ./downloads:/app/downloads
      # Mount library directory for final organized M4B audiobooks
      - ./library:/app/library
    environment:
      - SECRET_KEY=${SECRET_KEY:-dev-secret-key-change-in-production}
      - FLASK_ENV=${FLASK_ENV:-production}
    restart: unless-stopped

